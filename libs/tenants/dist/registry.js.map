{"version":3,"sources":["../src/registry.ts"],"sourcesContent":["import type { TenantSettings, TenantThemeConfig } from '@multi-tenancy/types';\nimport { dataroomConfig, getDataroomSettings } from './dataroom';\nimport { cryptocurrencyConfig, getCryptocurrencySettings } from './cryptocurrency';\nimport { defaultConfig, getDefaultSettings } from './default';\n\nexport interface TenantRegistryEntry {\n  id: string;\n  themeConfig: TenantThemeConfig;\n  getSettings: () => TenantSettings;\n}\n\nconst tenantRegistry: Map<string, TenantRegistryEntry> = new Map([\n  [\n    'dataroom',\n    {\n      id: 'dataroom',\n      themeConfig: dataroomConfig.themeConfig,\n      getSettings: getDataroomSettings,\n    },\n  ],\n  [\n    'cryptocurrency',\n    {\n      id: 'cryptocurrency',\n      themeConfig: cryptocurrencyConfig.themeConfig,\n      getSettings: getCryptocurrencySettings,\n    },\n  ],\n  [\n    'default',\n    {\n      id: 'default',\n      themeConfig: defaultConfig.themeConfig,\n      getSettings: getDefaultSettings,\n    },\n  ],\n]);\n\n/**\n * Gets tenant configuration by ID\n */\nexport function getTenantConfig(\n  tenantId: string\n): TenantRegistryEntry | undefined {\n  return tenantRegistry.get(tenantId);\n}\n\n/**\n * Gets tenant settings by ID, falls back to default\n */\nexport function getTenantSettings(tenantId: string): TenantSettings {\n  const entry = tenantRegistry.get(tenantId) ?? tenantRegistry.get('default');\n  if (!entry) {\n    throw new Error(`Tenant not found: ${tenantId}`);\n  }\n  return entry.getSettings();\n}\n\n/**\n * Gets all registered tenant IDs\n */\nexport function getRegisteredTenantIds(): string[] {\n  return Array.from(tenantRegistry.keys());\n}\n\n/**\n * Registers a new tenant configuration\n */\nexport function registerTenant(entry: TenantRegistryEntry): void {\n  tenantRegistry.set(entry.id, entry);\n}\n"],"names":["dataroomConfig","getDataroomSettings","cryptocurrencyConfig","getCryptocurrencySettings","defaultConfig","getDefaultSettings","tenantRegistry","Map","id","themeConfig","getSettings","getTenantConfig","tenantId","get","getTenantSettings","entry","Error","getRegisteredTenantIds","Array","from","keys","registerTenant","set"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AACA,SAASA,cAAc,EAAEC,mBAAmB,QAAQ,aAAa;AACjE,SAASC,oBAAoB,EAAEC,yBAAyB,QAAQ,mBAAmB;AACnF,SAASC,aAAa,EAAEC,kBAAkB,QAAQ,YAAY;AAQ9D,MAAMC,iBAAmD,IAAIC,IAAI;IAC/D;QACE;QACA;YACEC,IAAI;YACJC,aAAaT,eAAeS,WAAW;YACvCC,aAAaT;QACf;KACD;IACD;QACE;QACA;YACEO,IAAI;YACJC,aAAaP,qBAAqBO,WAAW;YAC7CC,aAAaP;QACf;KACD;IACD;QACE;QACA;YACEK,IAAI;YACJC,aAAaL,cAAcK,WAAW;YACtCC,aAAaL;QACf;KACD;CACF;AAED;;CAEC,GACD,OAAO,SAASM,gBACdC,QAAgB;IAEhB,OAAON,eAAeO,GAAG,CAACD;AAC5B;AAEA;;CAEC,GACD,OAAO,SAASE,kBAAkBF,QAAgB;QAClCN;IAAd,MAAMS,QAAQT,CAAAA,sBAAAA,eAAeO,GAAG,CAACD,qBAAnBN,sBAAgCA,eAAeO,GAAG,CAAC;IACjE,IAAI,CAACE,OAAO;QACV,MAAM,IAAIC,MAAM,CAAC,kBAAkB,EAAEJ,SAAS,CAAC;IACjD;IACA,OAAOG,MAAML,WAAW;AAC1B;AAEA;;CAEC,GACD,OAAO,SAASO;IACd,OAAOC,MAAMC,IAAI,CAACb,eAAec,IAAI;AACvC;AAEA;;CAEC,GACD,OAAO,SAASC,eAAeN,KAA0B;IACvDT,eAAegB,GAAG,CAACP,MAAMP,EAAE,EAAEO;AAC/B"}