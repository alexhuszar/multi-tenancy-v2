{"version":3,"sources":["../../src/themes/compose.ts"],"sourcesContent":["import type {\n  DesignTokens,\n  Theme,\n  SemanticTokens,\n  TenantThemeConfig,\n  DeepPartial,\n} from '@multi-tenancy/types';\nimport { baseTokens } from '../tokens/base';\nimport { lightSemanticTokens } from '../tokens/semantic/light';\nimport { darkSemanticTokens } from '../tokens/semantic/dark';\n\n/**\n * Deep merges token overrides with base tokens\n */\nfunction deepMerge<T extends object>(base: T, override: DeepPartial<T>): T {\n  const result = { ...base } as T;\n\n  for (const key in override) {\n    if (Object.prototype.hasOwnProperty.call(override, key)) {\n      const baseValue = base[key as keyof T];\n      const overrideValue = override[key as keyof typeof override];\n\n      if (\n        typeof baseValue === 'object' &&\n        baseValue !== null &&\n        typeof overrideValue === 'object' &&\n        overrideValue !== null &&\n        !Array.isArray(baseValue)\n      ) {\n        result[key as keyof T] = deepMerge(\n          baseValue as object,\n          overrideValue as DeepPartial<typeof baseValue>\n        ) as T[keyof T];\n      } else if (overrideValue !== undefined) {\n        result[key as keyof T] = overrideValue as T[keyof T];\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * Composes a theme from base tokens with optional tenant overrides\n */\nexport function composeTheme(\n  config: TenantThemeConfig,\n  mode: 'light' | 'dark' = 'light'\n): Theme {\n  const mergedTokens: DesignTokens = config.tokenOverrides\n    ? deepMerge(baseTokens, config.tokenOverrides)\n    : baseTokens;\n\n  const baseSemantic =\n    mode === 'light' ? lightSemanticTokens : darkSemanticTokens;\n  const mergedSemantic: SemanticTokens = config.semanticOverrides\n    ? deepMerge(baseSemantic, config.semanticOverrides)\n    : baseSemantic;\n\n  return {\n    name: config.tenantId,\n    mode,\n    tokens: mergedTokens,\n    semantic: mergedSemantic,\n  };\n}\n\n/**\n * Creates both light and dark themes for a tenant\n */\nexport function createTenantThemes(config: TenantThemeConfig): {\n  light: Theme;\n  dark: Theme;\n} {\n  return {\n    light: composeTheme(config, 'light'),\n    dark: composeTheme(config, 'dark'),\n  };\n}\n"],"names":["baseTokens","lightSemanticTokens","darkSemanticTokens","deepMerge","base","override","result","key","Object","prototype","hasOwnProperty","call","baseValue","overrideValue","Array","isArray","undefined","composeTheme","config","mode","mergedTokens","tokenOverrides","baseSemantic","mergedSemantic","semanticOverrides","name","tenantId","tokens","semantic","createTenantThemes","light","dark"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";AAOA,SAASA,UAAU,QAAQ,iBAAiB;AAC5C,SAASC,mBAAmB,QAAQ,2BAA2B;AAC/D,SAASC,kBAAkB,QAAQ,0BAA0B;AAE7D;;CAEC,GACD,SAASC,UAA4BC,IAAO,EAAEC,QAAwB;IACpE,MAAMC,SAAS,aAAKF;IAEpB,IAAK,MAAMG,OAAOF,SAAU;QAC1B,IAAIG,OAAOC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACN,UAAUE,MAAM;YACvD,MAAMK,YAAYR,IAAI,CAACG,IAAe;YACtC,MAAMM,gBAAgBR,QAAQ,CAACE,IAA6B;YAE5D,IACE,OAAOK,cAAc,YACrBA,cAAc,QACd,OAAOC,kBAAkB,YACzBA,kBAAkB,QAClB,CAACC,MAAMC,OAAO,CAACH,YACf;gBACAN,MAAM,CAACC,IAAe,GAAGJ,UACvBS,WACAC;YAEJ,OAAO,IAAIA,kBAAkBG,WAAW;gBACtCV,MAAM,CAACC,IAAe,GAAGM;YAC3B;QACF;IACF;IAEA,OAAOP;AACT;AAEA;;CAEC,GACD,OAAO,SAASW,aACdC,MAAyB,EACzBC,OAAyB,OAAO;IAEhC,MAAMC,eAA6BF,OAAOG,cAAc,GACpDlB,UAAUH,YAAYkB,OAAOG,cAAc,IAC3CrB;IAEJ,MAAMsB,eACJH,SAAS,UAAUlB,sBAAsBC;IAC3C,MAAMqB,iBAAiCL,OAAOM,iBAAiB,GAC3DrB,UAAUmB,cAAcJ,OAAOM,iBAAiB,IAChDF;IAEJ,OAAO;QACLG,MAAMP,OAAOQ,QAAQ;QACrBP;QACAQ,QAAQP;QACRQ,UAAUL;IACZ;AACF;AAEA;;CAEC,GACD,OAAO,SAASM,mBAAmBX,MAAyB;IAI1D,OAAO;QACLY,OAAOb,aAAaC,QAAQ;QAC5Ba,MAAMd,aAAaC,QAAQ;IAC7B;AACF"}