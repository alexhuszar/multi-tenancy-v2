{"version":3,"sources":["../../src/css/generator.ts"],"sourcesContent":["import type { DesignTokens, SemanticTokens, Theme } from '@multi-tenancy/types';\n\ntype CSSVariableMap = Record<string, string>;\n\n/**\n * Converts a nested token object to flat CSS variable map\n */\nfunction flattenTokens(obj: object, prefix = ''): CSSVariableMap {\n  const result: CSSVariableMap = {};\n\n  for (const [key, value] of Object.entries(obj)) {\n    const cssKey = prefix ? `${prefix}-${key}` : key;\n\n    if (typeof value === 'object' && value !== null) {\n      Object.assign(result, flattenTokens(value, cssKey));\n    } else {\n      result[`--${cssKey}`] = String(value);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Generates CSS variables from design tokens\n */\nexport function generateTokenVariables(tokens: DesignTokens): CSSVariableMap {\n  return flattenTokens(tokens);\n}\n\n/**\n * Generates CSS variables from semantic tokens\n */\nexport function generateSemanticVariables(\n  semantic: SemanticTokens\n): CSSVariableMap {\n  return flattenTokens(semantic, 'semantic');\n}\n\n/**\n * Generates a complete CSS variable string from a theme\n */\nexport function generateThemeCSS(theme: Theme): string {\n  const tokenVars = generateTokenVariables(theme.tokens);\n  const semanticVars = generateSemanticVariables(theme.semantic);\n\n  const allVars = { ...tokenVars, ...semanticVars };\n\n  const cssLines = Object.entries(allVars)\n    .map(([key, value]) => `  ${key}: ${value};`)\n    .join('\\n');\n\n  return `:root {\\n${cssLines}\\n}`;\n}\n\n/**\n * Generates CSS for a specific theme mode (for data-theme attribute)\n */\nexport function generateThemeModeCSS(theme: Theme, selector: string): string {\n  const tokenVars = generateTokenVariables(theme.tokens);\n  const semanticVars = generateSemanticVariables(theme.semantic);\n\n  const allVars = { ...tokenVars, ...semanticVars };\n\n  const cssLines = Object.entries(allVars)\n    .map(([key, value]) => `  ${key}: ${value};`)\n    .join('\\n');\n\n  return `${selector} {\\n${cssLines}\\n}`;\n}\n\n/**\n * Generates inline style object for runtime theme application\n */\nexport function generateThemeStyleObject(\n  theme: Theme\n): Record<string, string> {\n  const tokenVars = generateTokenVariables(theme.tokens);\n  const semanticVars = generateSemanticVariables(theme.semantic);\n\n  return { ...tokenVars, ...semanticVars };\n}\n"],"names":["flattenTokens","obj","prefix","result","key","value","Object","entries","cssKey","assign","String","generateTokenVariables","tokens","generateSemanticVariables","semantic","generateThemeCSS","theme","tokenVars","semanticVars","allVars","cssLines","map","join","generateThemeModeCSS","selector","generateThemeStyleObject"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";AAIA;;CAEC,GACD,SAASA,cAAcC,GAAW,EAAEC,SAAS,EAAE;IAC7C,MAAMC,SAAyB,CAAC;IAEhC,KAAK,MAAM,CAACC,KAAKC,MAAM,IAAIC,OAAOC,OAAO,CAACN,KAAM;QAC9C,MAAMO,SAASN,SAAS,CAAC,EAAEA,OAAO,CAAC,EAAEE,IAAI,CAAC,GAAGA;QAE7C,IAAI,OAAOC,UAAU,YAAYA,UAAU,MAAM;YAC/CC,OAAOG,MAAM,CAACN,QAAQH,cAAcK,OAAOG;QAC7C,OAAO;YACLL,MAAM,CAAC,CAAC,EAAE,EAAEK,OAAO,CAAC,CAAC,GAAGE,OAAOL;QACjC;IACF;IAEA,OAAOF;AACT;AAEA;;CAEC,GACD,OAAO,SAASQ,uBAAuBC,MAAoB;IACzD,OAAOZ,cAAcY;AACvB;AAEA;;CAEC,GACD,OAAO,SAASC,0BACdC,QAAwB;IAExB,OAAOd,cAAcc,UAAU;AACjC;AAEA;;CAEC,GACD,OAAO,SAASC,iBAAiBC,KAAY;IAC3C,MAAMC,YAAYN,uBAAuBK,MAAMJ,MAAM;IACrD,MAAMM,eAAeL,0BAA0BG,MAAMF,QAAQ;IAE7D,MAAMK,UAAU,aAAKF,WAAcC;IAEnC,MAAME,WAAWd,OAAOC,OAAO,CAACY,SAC7BE,GAAG,CAAC,CAAC,CAACjB,KAAKC,MAAM,GAAK,CAAC,EAAE,EAAED,IAAI,EAAE,EAAEC,MAAM,CAAC,CAAC,EAC3CiB,IAAI,CAAC;IAER,OAAO,CAAC,SAAS,EAAEF,SAAS,GAAG,CAAC;AAClC;AAEA;;CAEC,GACD,OAAO,SAASG,qBAAqBP,KAAY,EAAEQ,QAAgB;IACjE,MAAMP,YAAYN,uBAAuBK,MAAMJ,MAAM;IACrD,MAAMM,eAAeL,0BAA0BG,MAAMF,QAAQ;IAE7D,MAAMK,UAAU,aAAKF,WAAcC;IAEnC,MAAME,WAAWd,OAAOC,OAAO,CAACY,SAC7BE,GAAG,CAAC,CAAC,CAACjB,KAAKC,MAAM,GAAK,CAAC,EAAE,EAAED,IAAI,EAAE,EAAEC,MAAM,CAAC,CAAC,EAC3CiB,IAAI,CAAC;IAER,OAAO,CAAC,EAAEE,SAAS,IAAI,EAAEJ,SAAS,GAAG,CAAC;AACxC;AAEA;;CAEC,GACD,OAAO,SAASK,yBACdT,KAAY;IAEZ,MAAMC,YAAYN,uBAAuBK,MAAMJ,MAAM;IACrD,MAAMM,eAAeL,0BAA0BG,MAAMF,QAAQ;IAE7D,OAAO,aAAKG,WAAcC;AAC5B"}